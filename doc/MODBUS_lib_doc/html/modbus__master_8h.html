<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MODBUS: D:/EMBEDDED/LIBRARIES/C_libraries/MODBUS/src/modbus_master.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MODBUS<span id="projectnumber">&#160;v0.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">modbus_master.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Declarations for Modbus master functions and initialization.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="modbus__public__type_8h_source.html">modbus_public_type.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for modbus_master.h:</div>
<div class="dyncontent">
<div class="center"><img src="modbus__master_8h__incl.png" border="0" usemap="#a_d_1_2_e_m_b_e_d_d_e_d_2_l_i_b_r_a_r_i_e_s_2_c__libraries_2_m_o_d_b_u_s_2src_2modbus__master_8h" alt=""/></div>
<map name="a_d_1_2_e_m_b_e_d_d_e_d_2_l_i_b_r_a_r_i_e_s_2_c__libraries_2_m_o_d_b_u_s_2src_2modbus__master_8h" id="a_d_1_2_e_m_b_e_d_d_e_d_2_l_i_b_r_a_r_i_e_s_2_c__libraries_2_m_o_d_b_u_s_2src_2modbus__master_8h">
<area shape="rect" title="Declarations for Modbus master functions and initialization." alt="" coords="5,5,189,64"/>
<area shape="rect" href="modbus__public__type_8h.html" title="Defines public types and enums used in Modbus communication." alt="" coords="21,112,173,139"/>
<area shape="poly" title=" " alt="" coords="100,64,100,96,94,96,94,64"/>
<area shape="rect" title=" " alt="" coords="18,187,83,213"/>
<area shape="poly" title=" " alt="" coords="91,141,69,175,64,172,87,138"/>
<area shape="rect" title=" " alt="" coords="107,187,181,213"/>
<area shape="poly" title=" " alt="" coords="107,138,130,172,125,175,103,141"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="modbus__master_8h__dep__incl.png" border="0" usemap="#a_d_1_2_e_m_b_e_d_d_e_d_2_l_i_b_r_a_r_i_e_s_2_c__libraries_2_m_o_d_b_u_s_2src_2modbus__master_8hdep" alt=""/></div>
<map name="a_d_1_2_e_m_b_e_d_d_e_d_2_l_i_b_r_a_r_i_e_s_2_c__libraries_2_m_o_d_b_u_s_2src_2modbus__master_8hdep" id="a_d_1_2_e_m_b_e_d_d_e_d_2_l_i_b_r_a_r_i_e_s_2_c__libraries_2_m_o_d_b_u_s_2src_2modbus__master_8hdep">
<area shape="rect" title="Declarations for Modbus master functions and initialization." alt="" coords="5,5,189,64"/>
<area shape="rect" href="modbus__master_8c.html" title="Implementation of a Modbus master protocol handler for embedded systems." alt="" coords="5,112,189,171"/>
<area shape="poly" title=" " alt="" coords="100,80,100,112,94,112,94,80"/>
</map>
</div>
</div>
<p><a href="modbus__master_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8c2049c777b6d1d1ceeccba3b1179c20" id="r_a8c2049c777b6d1d1ceeccba3b1179c20"><td class="memItemLeft" align="right" valign="top"><a class="el" href="modbus__public__type_8h.html#a2aa323c0a3ec81d9a5b20f1c386a84ac">modbus_master_req_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8c2049c777b6d1d1ceeccba3b1179c20">modbus_master_read_coils</a> (<a class="el" href="modbus__public__type_8h.html#adc136695d03cf4fa30e82aa301a9e82c">modbus_adr_t</a> adr, <a class="el" href="modbus__public__type_8h.html#a8ec6d18b1df6ac30c98d80b7b566c26f">modbus_data_qty_t</a> coils_qty, <a class="el" href="modbus__public__type_8h.html#a0337c9ebe7abd02e220ad7ca6e4ac29d">modbus_device_ID_t</a> slave_ID)</td></tr>
<tr class="memdesc:a8c2049c777b6d1d1ceeccba3b1179c20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads coils from a slave device.  <br /></td></tr>
<tr class="separator:a8c2049c777b6d1d1ceeccba3b1179c20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9891164664abd774f853cc77e140964" id="r_ab9891164664abd774f853cc77e140964"><td class="memItemLeft" align="right" valign="top"><a class="el" href="modbus__public__type_8h.html#a2aa323c0a3ec81d9a5b20f1c386a84ac">modbus_master_req_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab9891164664abd774f853cc77e140964">modbus_master_read_discrete_inputs</a> (<a class="el" href="modbus__public__type_8h.html#adc136695d03cf4fa30e82aa301a9e82c">modbus_adr_t</a> adr, <a class="el" href="modbus__public__type_8h.html#a8ec6d18b1df6ac30c98d80b7b566c26f">modbus_data_qty_t</a> discrete_input_qty, <a class="el" href="modbus__public__type_8h.html#a0337c9ebe7abd02e220ad7ca6e4ac29d">modbus_device_ID_t</a> slave_ID)</td></tr>
<tr class="memdesc:ab9891164664abd774f853cc77e140964"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads discrete inputs from a slave device.  <br /></td></tr>
<tr class="separator:ab9891164664abd774f853cc77e140964"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5afa39cf3422707ef67249d5964ceab" id="r_ad5afa39cf3422707ef67249d5964ceab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="modbus__public__type_8h.html#a2aa323c0a3ec81d9a5b20f1c386a84ac">modbus_master_req_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad5afa39cf3422707ef67249d5964ceab">modbus_master_read_input_reg</a> (<a class="el" href="modbus__public__type_8h.html#adc136695d03cf4fa30e82aa301a9e82c">modbus_adr_t</a> adr, <a class="el" href="modbus__public__type_8h.html#a8ec6d18b1df6ac30c98d80b7b566c26f">modbus_data_qty_t</a> reg_qty, <a class="el" href="modbus__public__type_8h.html#a0337c9ebe7abd02e220ad7ca6e4ac29d">modbus_device_ID_t</a> slave_ID)</td></tr>
<tr class="memdesc:ad5afa39cf3422707ef67249d5964ceab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads input registers from a slave device.  <br /></td></tr>
<tr class="separator:ad5afa39cf3422707ef67249d5964ceab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88a86815aa2476495112ad8bd03524f6" id="r_a88a86815aa2476495112ad8bd03524f6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="modbus__public__type_8h.html#a2aa323c0a3ec81d9a5b20f1c386a84ac">modbus_master_req_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a88a86815aa2476495112ad8bd03524f6">modbus_master_read_holding_reg</a> (<a class="el" href="modbus__public__type_8h.html#adc136695d03cf4fa30e82aa301a9e82c">modbus_adr_t</a> adr, <a class="el" href="modbus__public__type_8h.html#a8ec6d18b1df6ac30c98d80b7b566c26f">modbus_data_qty_t</a> hreg_qty, <a class="el" href="modbus__public__type_8h.html#a0337c9ebe7abd02e220ad7ca6e4ac29d">modbus_device_ID_t</a> slave_ID)</td></tr>
<tr class="memdesc:a88a86815aa2476495112ad8bd03524f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads holding registers from a slave device.  <br /></td></tr>
<tr class="separator:a88a86815aa2476495112ad8bd03524f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0f82a9dba235f80d0c130b56f09c88e" id="r_aa0f82a9dba235f80d0c130b56f09c88e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="modbus__public__type_8h.html#a2aa323c0a3ec81d9a5b20f1c386a84ac">modbus_master_req_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa0f82a9dba235f80d0c130b56f09c88e">modbus_master_write_single_coil</a> (<a class="el" href="modbus__public__type_8h.html#adc136695d03cf4fa30e82aa301a9e82c">modbus_adr_t</a> adr, <a class="el" href="modbus__public__type_8h.html#a0337c9ebe7abd02e220ad7ca6e4ac29d">modbus_device_ID_t</a> slave_ID, <a class="el" href="modbus__public__type_8h.html#ab404c5fe76f4296cf424a0c47267d014">modbus_coil_disin_t</a> coil_2_write)</td></tr>
<tr class="memdesc:aa0f82a9dba235f80d0c130b56f09c88e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a single coil to a slave device.  <br /></td></tr>
<tr class="separator:aa0f82a9dba235f80d0c130b56f09c88e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af14df306e8da24931a849e836ae8c4c9" id="r_af14df306e8da24931a849e836ae8c4c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="modbus__public__type_8h.html#a2aa323c0a3ec81d9a5b20f1c386a84ac">modbus_master_req_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af14df306e8da24931a849e836ae8c4c9">modbus_master_write_single_reg</a> (<a class="el" href="modbus__public__type_8h.html#adc136695d03cf4fa30e82aa301a9e82c">modbus_adr_t</a> adr, <a class="el" href="modbus__public__type_8h.html#a0337c9ebe7abd02e220ad7ca6e4ac29d">modbus_device_ID_t</a> slave_ID, <a class="el" href="modbus__public__type_8h.html#ab53e22460a149df7a2fadfa44ac525b3">modbus_reg_t</a> reg_2_write)</td></tr>
<tr class="memdesc:af14df306e8da24931a849e836ae8c4c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a single register to a slave device.  <br /></td></tr>
<tr class="separator:af14df306e8da24931a849e836ae8c4c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60045c92ec09da865459ce849edd9f7f" id="r_a60045c92ec09da865459ce849edd9f7f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="modbus__public__type_8h.html#a2aa323c0a3ec81d9a5b20f1c386a84ac">modbus_master_req_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a60045c92ec09da865459ce849edd9f7f">modbus_master_write_multiple_reg</a> (<a class="el" href="modbus__public__type_8h.html#adc136695d03cf4fa30e82aa301a9e82c">modbus_adr_t</a> adr, <a class="el" href="modbus__public__type_8h.html#a8ec6d18b1df6ac30c98d80b7b566c26f">modbus_data_qty_t</a> reg_qty, <a class="el" href="modbus__public__type_8h.html#a0337c9ebe7abd02e220ad7ca6e4ac29d">modbus_device_ID_t</a> slave_ID, <a class="el" href="modbus__public__type_8h.html#ab53e22460a149df7a2fadfa44ac525b3">modbus_reg_t</a> *rw_data_ptr)</td></tr>
<tr class="memdesc:a60045c92ec09da865459ce849edd9f7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes multiple registers to a slave device.  <br /></td></tr>
<tr class="separator:a60045c92ec09da865459ce849edd9f7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ddb04562b8938ea8672d3cb14a55c66" id="r_a7ddb04562b8938ea8672d3cb14a55c66"><td class="memItemLeft" align="right" valign="top"><a class="el" href="modbus__public__type_8h.html#a2aa323c0a3ec81d9a5b20f1c386a84ac">modbus_master_req_ret_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ddb04562b8938ea8672d3cb14a55c66">modbus_master_write_multiple_coils</a> (<a class="el" href="modbus__public__type_8h.html#adc136695d03cf4fa30e82aa301a9e82c">modbus_adr_t</a> adr, <a class="el" href="modbus__public__type_8h.html#a8ec6d18b1df6ac30c98d80b7b566c26f">modbus_data_qty_t</a> coils_qty, <a class="el" href="modbus__public__type_8h.html#a0337c9ebe7abd02e220ad7ca6e4ac29d">modbus_device_ID_t</a> slave_ID, <a class="el" href="modbus__public__type_8h.html#ab404c5fe76f4296cf424a0c47267d014">modbus_coil_disin_t</a> *rw_data_ptr)</td></tr>
<tr class="memdesc:a7ddb04562b8938ea8672d3cb14a55c66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes multiple coils to a slave device.  <br /></td></tr>
<tr class="separator:a7ddb04562b8938ea8672d3cb14a55c66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa162293ab330ee452be58c3fdbab8eea" id="r_aa162293ab330ee452be58c3fdbab8eea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa162293ab330ee452be58c3fdbab8eea">modbus_master_init</a> (<a class="el" href="modbus__public__type_8h.html#acb4a1f501ad5d66f9fd75b0e33b7de92">modbus_mode_t</a> mode, <a class="el" href="modbus__public__type_8h.html#ad191fc361cc09f8aa88c4e5c8c5b2fb6">baud_t</a> baud_rate, <a class="el" href="modbus__public__type_8h.html#a8c9f47bdc80c9f4db63b7bf8b1ad5290">parity_t</a> parity)</td></tr>
<tr class="memdesc:aa162293ab330ee452be58c3fdbab8eea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the Modbus master.  <br /></td></tr>
<tr class="separator:aa162293ab330ee452be58c3fdbab8eea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9ea828fe7c1deb599a5c61c8d4144cd" id="r_ab9ea828fe7c1deb599a5c61c8d4144cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab9ea828fe7c1deb599a5c61c8d4144cd">update_modbus_master_manager</a> (void)</td></tr>
<tr class="memdesc:ab9ea828fe7c1deb599a5c61c8d4144cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the Modbus master state machine.  <br /></td></tr>
<tr class="separator:ab9ea828fe7c1deb599a5c61c8d4144cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Declarations for Modbus master functions and initialization. </p>
<dl class="section author"><dt>Author</dt><dd>niwciu (<a href="#" onclick="location.href='mai'+'lto:'+'niw'+'ci'+'u@g'+'ma'+'il.'+'co'+'m'; return false;">niwci<span class="obfuscator">.nosp@m.</span>u@gm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2024-05-27 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2024</dd></dl>
<p>This header file provides declarations for Modbus master functions and initialization routines. It includes functions for reading and writing coils (discrete outputs) and registers (input and holding), as well as initializing the Modbus master configuration and managing Modbus responses.</p>
<p>Functions like <code>modbus_master_read_coils</code> and <code>modbus_master_write_single_reg</code> are used to perform Modbus transactions with a specified slave device identified by <code>slave_ID</code> and targeted data addresses (<code>adr</code>).</p>
<p>The <code>modbus_master_init</code> function initializes the Modbus master with specified communication parameters such as mode (<code>mode</code>), baud rate (<code>baud_rate</code>), and parity (<code>parity</code>). The <code>update_modbus_master_manager</code> function, although suggested for renaming, is intended to manage Modbus responses or slave communications.</p>
<dl class="section note"><dt>Note</dt><dd>Ensure correct usage of these functions according to the Modbus protocol specifications and your application's requirements for reliable communication with Modbus slave devices. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aa162293ab330ee452be58c3fdbab8eea" name="aa162293ab330ee452be58c3fdbab8eea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa162293ab330ee452be58c3fdbab8eea">&#9670;&#160;</a></span>modbus_master_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void modbus_master_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#acb4a1f501ad5d66f9fd75b0e33b7de92">modbus_mode_t</a></td>          <td class="paramname"><span class="paramname"><em>mode</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#ad191fc361cc09f8aa88c4e5c8c5b2fb6">baud_t</a></td>          <td class="paramname"><span class="paramname"><em>baud_rate</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#a8c9f47bdc80c9f4db63b7bf8b1ad5290">parity_t</a></td>          <td class="paramname"><span class="paramname"><em>parity</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the Modbus master. </p>
<p>This function sets up the Modbus master by registering message request/response data buffers, initializing queues, and pushing all available message buffers to the free queue. It also initializes the RTU driver with the provided baud rate and parity settings, and registers the necessary callbacks for handling various Modbus events.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>The mode of Modbus communication (e.g., RTU). </td></tr>
    <tr><td class="paramname">baud_rate</td><td>The baud rate for the RTU communication. </td></tr>
    <tr><td class="paramname">parity</td><td>The parity setting for the RTU communication.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function sets up all internal flags and the Modbus master state machine to their default values. </dd></dl>

</div>
</div>
<a id="a8c2049c777b6d1d1ceeccba3b1179c20" name="a8c2049c777b6d1d1ceeccba3b1179c20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c2049c777b6d1d1ceeccba3b1179c20">&#9670;&#160;</a></span>modbus_master_read_coils()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="modbus__public__type_8h.html#a2aa323c0a3ec81d9a5b20f1c386a84ac">modbus_master_req_ret_t</a> modbus_master_read_coils </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#adc136695d03cf4fa30e82aa301a9e82c">modbus_adr_t</a></td>          <td class="paramname"><span class="paramname"><em>adr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#a8ec6d18b1df6ac30c98d80b7b566c26f">modbus_data_qty_t</a></td>          <td class="paramname"><span class="paramname"><em>coils_qty</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#a0337c9ebe7abd02e220ad7ca6e4ac29d">modbus_device_ID_t</a></td>          <td class="paramname"><span class="paramname"><em>slave_ID</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads coils from a slave device. </p>
<p>This function creates a request to read coils from a specified address on a slave device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adr</td><td>The starting address to read coils from. </td></tr>
    <tr><td class="paramname">coils_qty</td><td>The quantity of coils to read. </td></tr>
    <tr><td class="paramname">slave_ID</td><td>The ID of the slave device to read from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the Modbus master request. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MODBUS_MASTER_FREE_QUEUE_EMPTY_ERROR</td><td>If the free queue is empty. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_LIB_PDU_REQ_ERROR</td><td>If there's an error generating the PDU request. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_LIB_RTU_SEND_ERROR</td><td>If there's an error sending the RTU message. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_REQUEST_SEND_TO_QUEUE</td><td>If the request was successfully sent to the queue. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab9891164664abd774f853cc77e140964" name="ab9891164664abd774f853cc77e140964"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9891164664abd774f853cc77e140964">&#9670;&#160;</a></span>modbus_master_read_discrete_inputs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="modbus__public__type_8h.html#a2aa323c0a3ec81d9a5b20f1c386a84ac">modbus_master_req_ret_t</a> modbus_master_read_discrete_inputs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#adc136695d03cf4fa30e82aa301a9e82c">modbus_adr_t</a></td>          <td class="paramname"><span class="paramname"><em>adr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#a8ec6d18b1df6ac30c98d80b7b566c26f">modbus_data_qty_t</a></td>          <td class="paramname"><span class="paramname"><em>discrete_input_qty</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#a0337c9ebe7abd02e220ad7ca6e4ac29d">modbus_device_ID_t</a></td>          <td class="paramname"><span class="paramname"><em>slave_ID</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads discrete inputs from a slave device. </p>
<p>This function creates a request to read discrete inputs from a specified address on a slave device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adr</td><td>The starting address to read discrete inputs from. </td></tr>
    <tr><td class="paramname">discrete_input_qty</td><td>The quantity of discrete inputs to read. </td></tr>
    <tr><td class="paramname">slave_ID</td><td>The ID of the slave device to read from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the Modbus master request. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MODBUS_MASTER_FREE_QUEUE_EMPTY_ERROR</td><td>If the free queue is empty. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_LIB_PDU_REQ_ERROR</td><td>If there's an error generating the PDU request. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_LIB_RTU_SEND_ERROR</td><td>If there's an error sending the RTU message. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_REQUEST_SEND_TO_QUEUE</td><td>If the request was successfully sent to the queue. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a88a86815aa2476495112ad8bd03524f6" name="a88a86815aa2476495112ad8bd03524f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88a86815aa2476495112ad8bd03524f6">&#9670;&#160;</a></span>modbus_master_read_holding_reg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="modbus__public__type_8h.html#a2aa323c0a3ec81d9a5b20f1c386a84ac">modbus_master_req_ret_t</a> modbus_master_read_holding_reg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#adc136695d03cf4fa30e82aa301a9e82c">modbus_adr_t</a></td>          <td class="paramname"><span class="paramname"><em>adr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#a8ec6d18b1df6ac30c98d80b7b566c26f">modbus_data_qty_t</a></td>          <td class="paramname"><span class="paramname"><em>hreg_qty</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#a0337c9ebe7abd02e220ad7ca6e4ac29d">modbus_device_ID_t</a></td>          <td class="paramname"><span class="paramname"><em>slave_ID</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads holding registers from a slave device. </p>
<p>This function creates a request to read holding registers from a specified address on a slave device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adr</td><td>The starting address to read holding registers from. </td></tr>
    <tr><td class="paramname">hreg_qty</td><td>The quantity of holding registers to read. </td></tr>
    <tr><td class="paramname">slave_ID</td><td>The ID of the slave device to read from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the Modbus master request. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MODBUS_MASTER_FREE_QUEUE_EMPTY_ERROR</td><td>If the free queue is empty. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_LIB_PDU_REQ_ERROR</td><td>If there's an error generating the PDU request. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_LIB_RTU_SEND_ERROR</td><td>If there's an error sending the RTU message. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_REQUEST_SEND_TO_QUEUE</td><td>If the request was successfully sent to the queue. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad5afa39cf3422707ef67249d5964ceab" name="ad5afa39cf3422707ef67249d5964ceab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5afa39cf3422707ef67249d5964ceab">&#9670;&#160;</a></span>modbus_master_read_input_reg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="modbus__public__type_8h.html#a2aa323c0a3ec81d9a5b20f1c386a84ac">modbus_master_req_ret_t</a> modbus_master_read_input_reg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#adc136695d03cf4fa30e82aa301a9e82c">modbus_adr_t</a></td>          <td class="paramname"><span class="paramname"><em>adr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#a8ec6d18b1df6ac30c98d80b7b566c26f">modbus_data_qty_t</a></td>          <td class="paramname"><span class="paramname"><em>reg_qty</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#a0337c9ebe7abd02e220ad7ca6e4ac29d">modbus_device_ID_t</a></td>          <td class="paramname"><span class="paramname"><em>slave_ID</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads input registers from a slave device. </p>
<p>This function creates a request to read input registers from a specified address on a slave device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adr</td><td>The starting address to read input registers from. </td></tr>
    <tr><td class="paramname">reg_qty</td><td>The quantity of input registers to read. </td></tr>
    <tr><td class="paramname">slave_ID</td><td>The ID of the slave device to read from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the Modbus master request. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MODBUS_MASTER_FREE_QUEUE_EMPTY_ERROR</td><td>If the free queue is empty. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_LIB_PDU_REQ_ERROR</td><td>If there's an error generating the PDU request. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_LIB_RTU_SEND_ERROR</td><td>If there's an error sending the RTU message. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_REQUEST_SEND_TO_QUEUE</td><td>If the request was successfully sent to the queue. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7ddb04562b8938ea8672d3cb14a55c66" name="a7ddb04562b8938ea8672d3cb14a55c66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ddb04562b8938ea8672d3cb14a55c66">&#9670;&#160;</a></span>modbus_master_write_multiple_coils()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="modbus__public__type_8h.html#a2aa323c0a3ec81d9a5b20f1c386a84ac">modbus_master_req_ret_t</a> modbus_master_write_multiple_coils </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#adc136695d03cf4fa30e82aa301a9e82c">modbus_adr_t</a></td>          <td class="paramname"><span class="paramname"><em>adr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#a8ec6d18b1df6ac30c98d80b7b566c26f">modbus_data_qty_t</a></td>          <td class="paramname"><span class="paramname"><em>coils_qty</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#a0337c9ebe7abd02e220ad7ca6e4ac29d">modbus_device_ID_t</a></td>          <td class="paramname"><span class="paramname"><em>slave_ID</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#ab404c5fe76f4296cf424a0c47267d014">modbus_coil_disin_t</a> *</td>          <td class="paramname"><span class="paramname"><em>rw_data_ptr</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes multiple coils to a slave device. </p>
<p>This function creates a request to write multiple coils to a specified address on a slave device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adr</td><td>The starting address to write the coils to. </td></tr>
    <tr><td class="paramname">coils_qty</td><td>The quantity of coils to write. </td></tr>
    <tr><td class="paramname">slave_ID</td><td>The ID of the slave device to write to. </td></tr>
    <tr><td class="paramname">rw_data_ptr</td><td>A pointer to the data to write to the coils. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the Modbus master request. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MODBUS_MASTER_FREE_QUEUE_EMPTY_ERROR</td><td>If the free queue is empty. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_LIB_PDU_REQ_ERROR</td><td>If there's an error generating the PDU request. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_LIB_RTU_SEND_ERROR</td><td>If there's an error sending the RTU message. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_REQUEST_SEND_TO_QUEUE</td><td>If the request was successfully sent to the queue. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a60045c92ec09da865459ce849edd9f7f" name="a60045c92ec09da865459ce849edd9f7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60045c92ec09da865459ce849edd9f7f">&#9670;&#160;</a></span>modbus_master_write_multiple_reg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="modbus__public__type_8h.html#a2aa323c0a3ec81d9a5b20f1c386a84ac">modbus_master_req_ret_t</a> modbus_master_write_multiple_reg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#adc136695d03cf4fa30e82aa301a9e82c">modbus_adr_t</a></td>          <td class="paramname"><span class="paramname"><em>adr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#a8ec6d18b1df6ac30c98d80b7b566c26f">modbus_data_qty_t</a></td>          <td class="paramname"><span class="paramname"><em>reg_qty</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#a0337c9ebe7abd02e220ad7ca6e4ac29d">modbus_device_ID_t</a></td>          <td class="paramname"><span class="paramname"><em>slave_ID</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#ab53e22460a149df7a2fadfa44ac525b3">modbus_reg_t</a> *</td>          <td class="paramname"><span class="paramname"><em>rw_data_ptr</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes multiple registers to a slave device. </p>
<p>This function creates a request to write multiple registers to a specified address on a slave device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adr</td><td>The starting address to write the registers to. </td></tr>
    <tr><td class="paramname">reg_qty</td><td>The quantity of registers to write. </td></tr>
    <tr><td class="paramname">slave_ID</td><td>The ID of the slave device to write to. </td></tr>
    <tr><td class="paramname">rw_data_ptr</td><td>A pointer to the data to write to the registers. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the Modbus master request. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MODBUS_MASTER_FREE_QUEUE_EMPTY_ERROR</td><td>If the free queue is empty. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_LIB_PDU_REQ_ERROR</td><td>If there's an error generating the PDU request. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_LIB_RTU_SEND_ERROR</td><td>If there's an error sending the RTU message. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_REQUEST_SEND_TO_QUEUE</td><td>If the request was successfully sent to the queue. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa0f82a9dba235f80d0c130b56f09c88e" name="aa0f82a9dba235f80d0c130b56f09c88e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0f82a9dba235f80d0c130b56f09c88e">&#9670;&#160;</a></span>modbus_master_write_single_coil()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="modbus__public__type_8h.html#a2aa323c0a3ec81d9a5b20f1c386a84ac">modbus_master_req_ret_t</a> modbus_master_write_single_coil </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#adc136695d03cf4fa30e82aa301a9e82c">modbus_adr_t</a></td>          <td class="paramname"><span class="paramname"><em>adr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#a0337c9ebe7abd02e220ad7ca6e4ac29d">modbus_device_ID_t</a></td>          <td class="paramname"><span class="paramname"><em>slave_ID</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#ab404c5fe76f4296cf424a0c47267d014">modbus_coil_disin_t</a></td>          <td class="paramname"><span class="paramname"><em>coil_2_write</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a single coil to a slave device. </p>
<p>This function creates a request to write a single coil to a specified address on a slave device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adr</td><td>The address to write the coil to. </td></tr>
    <tr><td class="paramname">slave_ID</td><td>The ID of the slave device to write to. </td></tr>
    <tr><td class="paramname">coil_2_write</td><td>The value of the coil to write. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the Modbus master request. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MODBUS_MASTER_FREE_QUEUE_EMPTY_ERROR</td><td>If the free queue is empty. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_LIB_PDU_REQ_ERROR</td><td>If there's an error generating the PDU request. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_LIB_RTU_SEND_ERROR</td><td>If there's an error sending the RTU message. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_REQUEST_SEND_TO_QUEUE</td><td>If the request was successfully sent to the queue. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af14df306e8da24931a849e836ae8c4c9" name="af14df306e8da24931a849e836ae8c4c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af14df306e8da24931a849e836ae8c4c9">&#9670;&#160;</a></span>modbus_master_write_single_reg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="modbus__public__type_8h.html#a2aa323c0a3ec81d9a5b20f1c386a84ac">modbus_master_req_ret_t</a> modbus_master_write_single_reg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#adc136695d03cf4fa30e82aa301a9e82c">modbus_adr_t</a></td>          <td class="paramname"><span class="paramname"><em>adr</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#a0337c9ebe7abd02e220ad7ca6e4ac29d">modbus_device_ID_t</a></td>          <td class="paramname"><span class="paramname"><em>slave_ID</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="modbus__public__type_8h.html#ab53e22460a149df7a2fadfa44ac525b3">modbus_reg_t</a></td>          <td class="paramname"><span class="paramname"><em>reg_2_write</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a single register to a slave device. </p>
<p>This function creates a request to write a single register to a specified address on a slave device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adr</td><td>The address to write the register to. </td></tr>
    <tr><td class="paramname">slave_ID</td><td>The ID of the slave device to write to. </td></tr>
    <tr><td class="paramname">reg_2_write</td><td>The value of the register to write. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the Modbus master request. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MODBUS_MASTER_FREE_QUEUE_EMPTY_ERROR</td><td>If the free queue is empty. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_LIB_PDU_REQ_ERROR</td><td>If there's an error generating the PDU request. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_LIB_RTU_SEND_ERROR</td><td>If there's an error sending the RTU message. </td></tr>
    <tr><td class="paramname">MODBUS_MASTER_REQUEST_SEND_TO_QUEUE</td><td>If the request was successfully sent to the queue. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab9ea828fe7c1deb599a5c61c8d4144cd" name="ab9ea828fe7c1deb599a5c61c8d4144cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9ea828fe7c1deb599a5c61c8d4144cd">&#9670;&#160;</a></span>update_modbus_master_manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_modbus_master_manager </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the Modbus master state machine. </p>
<p>This function manages the state transitions of the Modbus master state machine. Depending on the current state, it invokes the appropriate handler function:</p><ul>
<li><code>MODBUS_MASTER_IDLE</code>: Calls <code>modbus_master_idle_state_handling</code> to handle the idle state.</li>
<li><code>MODBUS_MASTER_REPEAT_REQUEST</code>: Calls <code>modbus_master_send_req_from_msg_buf</code> to resend the request.</li>
<li><code>MODBUS_MASTER_TRANSMITTING_REQ</code>: Calls <code>modbus_master_transmitting_state_handling</code> to handle the transmitting state.</li>
<li><code>MODBUS_MASTER_RESP_WAITING</code>: Calls <code>modbus_master_resp_waiting_state_handling</code> to handle the response waiting state.</li>
<li><code>MODBUS_MASTER_RESP_RECIVED</code>: Calls <code>modbus_master_resp_recived_state_handling</code> to handle the received response state.</li>
</ul>
<p>If the state does not match any of the above, it defaults to setting the state machine to <code>MODBUS_MASTER_IDLE</code>. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
